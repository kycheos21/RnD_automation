# NTIS 웹 크롤링 기반 자동화 서비스 개요

## 1. 프로젝트 개요

### 서비스명
NTIS 정부과제 정보 자동수집 및 리포트 시스템

### 목적
NTIS 웹사이트 크롤링을 통한 정부과제 정보 자동 수집 및 일일 리포트 제공

### 핵심 기능
- 키워드 검색 자동화
- 정부과제 정보 크롤링 및 데이터 추출
- 엑셀 리포트 자동 생성
- 매일 오전 9시 이메일 자동 발송

### 개발 기간
1주일 (1명)

## 2. 기술 스택

### 개발 도구
- **Cursor**: AI 기반 코딩 어시스턴트
- **Claude Code**: 터미널 기반 개발 위임
- **Firecrawl**: 웹 크롤링 및 데이터 추출

### 백엔드
- **Node.js/Python**: 백엔드 로직
- **Firecrawl API**: 웹 크롤링 처리

### 데이터 처리
- **pandas**: 데이터 분석 및 조작
- **openpyxl**: 엑셀 파일 생성 및 스타일링
- **smtplib**: 이메일 발송 (Python 내장)

### 배포 환경
- 로컬 PC 또는 클라우드 서버
- Gmail/웹메일 SMTP: 이메일 발송

## 3. 시스템 아키텍처

### 주요 컴포넌트
1. **크롤링 엔진**: Firecrawl 기반 NTIS 데이터 수집
2. **데이터 처리기**: 수집된 데이터 분석 및 매칭점수 계산
3. **리포트 생성기**: 엑셀 파일 생성 및 스타일링
4. **이메일 발송기**: 자동 이메일 발송 시스템
5. **스케줄러**: 매일 오전 9시 자동 실행

### 데이터 흐름
```
NTIS 웹사이트 → Firecrawl API → 데이터 처리 → 엑셀 생성 → 이메일 발송
```

## 4. 기능 명세

### 4.0 API 연동 
- https://www.data.go.kr/data/15077315/openapi.do 
- {"name":"한국과학기술정보연구원_국가R&D 과제검색 서비스(대국민용)","description":"국가R&D로 수행된 연구과제들의 메타정보를 종합적으로 검색할 수 있는 서비스를 제공하는 API입니다.","url":"https://www.data.go.kr/data/15077315/openapi.do","keywords":"정보/통신,정보이론,정보검색","license":"공공저작물_출처표시","dateCreated":"2021-02-19","dateModified":"2021-09-16","datePublished":"2021-02-19","creator":{"name":"한국과학기술정보연구원","contactPoint":{"contactType":"정보화전략실","telephone":"042-869-1875","@type":"ContactPoint"},"@type":"Organization"},"additionalType":"과학기술 - 과학기술연구","encodingFormat":"XML","@context":"https://schema.org","@type":"Dataset"}


### 4.1 웹 크롤링 기능
- **대상 사이트**: NTIS (https://www.ntis.go.kr/rndgate/eg/un/ra/mng.do)
- **수집 데이터**: 과제명, 공고기관, 신청마감일, 사업비, 링크
- **검색 방식**: 키워드 기반 자동 검색
- **추출 스키마**: 구조화된 JSON 형태로 데이터 추출

### 4.2 데이터 처리 기능
- **매칭점수 계산**: 키워드 기반 관련도 점수 산정
- **마감일 계산**: 남은 일수 자동 계산
- **데이터 정렬**: 매칭점수 기준 우선순위 정렬

### 4.3 엑셀 리포트 생성
- **파일명 형식**: `NTIS_추천과제_YYYY-MM-DD.xlsx`
- **Sheet 구성**:
  - Sheet1: 추천과제 (매칭점수 상위 20개)
  - Sheet2: 전체목록 (키워드 검색된 모든 과제)
  - Sheet3: 트렌드분석 (이번 주 핫키워드 TOP 10)

### 4.4 이메일 자동 발송
- **발송 시간**: 매일 오전 9시
- **수신 대상**: 팀 메일링 리스트
- **첨부파일**: 당일 생성된 엑셀 리포트
- **본문 구성**: 요약 정보, 주목 과제, 마감 임박 과제

## 5. 라이브러리 상세

### pandas
- **용도**: 데이터 분석 및 조작
- **핵심 기능**: DataFrame 구조, 다양한 포맷 지원, 데이터 조작

### openpyxl
- **용도**: 엑셀 파일 읽기/쓰기/편집
- **핵심 기능**: 셀 스타일링, 다중 시트 관리, 차트 생성

### smtplib
- **용도**: 이메일 발송
- **지원 서비스**: 
  - 웹메일: 회사 계정 (무제한 또는 회사 정책에 따라)
  - Gmail: 일 500통 무료
  - Outlook: 일 300통 무료
  - Naver: 일 200통 무료

## 6. 예상 결과물

### 이메일 리포트
- **제목**: `[일일리포트] NTIS 추천 정부과제 (YYYY.MM.DD)`
- **본문 구성**:
  - 📊 요약: 신규 과제 수, 추천 과제 수, 핫키워드
  - 🔥 주목할 과제: 상위 매칭점수 과제
  - ⏰ 마감 임박: D-7 이내 과제

### 엑셀 파일 구조
#### Sheet1: 추천과제
| 순위 | 과제명 | 공고기관 | 사업비 | 신청마감일 | 남은일수 | 매칭점수 | 공고링크 |
|------|--------|----------|---------|------------|----------|----------|----------|

#### Sheet2: 전체목록
- 키워드로 검색된 모든 과제 정보

#### Sheet3: 트렌드분석
| 키워드 | 등장횟수 | 전주대비 | 비중 |
|--------|----------|----------|------|

## 7. 개발 일정

### Day 1-2: 크롤링 엔진 개발
- Firecrawl 환경 설정 및 API 키 발급
- NTIS 사이트 구조 분석
- Firecrawl actions를 이용한 검색 자동화 스크립트 작성

### Day 3-4: 데이터 처리 및 엑셀 생성
- Firecrawl 결과 데이터 처리 로직 구현
- 매칭점수 계산 알고리즘 개발
- 엑셀 파일 생성 및 스타일링 구현

### Day 5-7: 이메일 자동화 및 배포
- 웹메일 SMTP 기반 이메일 발송 시스템 구현
- 스케줄러 설정 (매일 오전 9시 실행)
- 시스템 테스트 및 배포

## 8. 웹메일 SMTP 설정

### 설정 확인 방법
- IT 담당자 문의: 회사 웹메일 SMTP 서버 주소, 포트번호

### 일반적인 설정
- **SMTP 서버**: `mail.company.co.kr` 또는 `smtp.company.co.kr`
- **포트**: 587 (TLS), 465 (SSL), 25 (비보안)
- **보안**: STARTTLS 또는 SSL/TLS

### 테스트 방법
- 연결 테스트를 통한 SMTP 설정 검증
- 실행 전 이메일 설정 확인

## 9. 제약사항 및 고려사항

- NTIS 웹사이트 구조 변경 시 크롤링 로직 업데이트 필요
- 웹메일 SMTP 서버 정책에 따른 발송 제한
- Firecrawl API 사용량 제한 고려
- 개인정보 보호 및 웹사이트 이용약관 준수

## 10. 향후 확장 가능성

- 다른 정부과제 사이트 추가 크롤링
- 웹 대시보드 구현
- 모바일 알림 기능 추가
- AI 기반 과제 추천 고도화

